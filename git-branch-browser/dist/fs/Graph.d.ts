import Pattern from './Pattern';
import Relation from './Relation';
import InMemoryStorage from './InMemoryStorage';
import SavedQuery from './SavedQuery';
import StorageMount from './StorageMount';
import EagerValue from './EagerValue';
import { UpdateFn } from './UpdateContext';
import InheritTags from './InheritTags';
import TypeInfo from './TypeInfo';
import WebSocketProvider from './WebSocketProvider';
import RelationReceiver from './RelationReceiver';
import UpdateContext from './UpdateContext';
import TagTypeOrdering from './TagTypeOrdering';
import IDSource from './utils/IDSource';
import { ObjectTypeSpace } from './hooks/ObjectSpace';
import GraphListener, { GraphListenerMount } from './GraphListenerV3';
import SaveSearchHook from './SaveSearchHook';
import StorageSlotHook from './StorageSlotHook';
export default class Graph {
    inMemory: InMemoryStorage;
    objectTypes: ObjectTypeSpace;
    listeners: GraphListenerMount[];
    savedQueries: SavedQuery[];
    savedQueryMap: {
        [queryStr: string]: SavedQuery;
    };
    ordering: TagTypeOrdering;
    typeInfo: {
        [typeName: string]: TypeInfo;
    };
    inheritTags: EagerValue<InheritTags>;
    filesystemMounts: EagerValue<StorageMount[]>;
    wsProviders: EagerValue<WebSocketProvider[]>;
    derivedValueMounts: StorageMount[];
    eagerValueIds: IDSource;
    graphListenerIds: IDSource;
    saveSearchHooks: SaveSearchHook[];
    storageSlotHooks: StorageSlotHook[];
    constructor();
    savedQuery(queryStr: string): SavedQuery;
    eagerValue<T>(updateFn: UpdateFn<T>, initialValue?: T): EagerValue<T>;
    iterateMounts(): IterableIterator<StorageMount>;
    getTypeInfo(name: string): TypeInfo;
    addListener(pattern: Pattern, listener: GraphListener): void;
    onRelationUpdated(rel: Relation): void;
    onRelationDeleted(rel: Relation): void;
    run(commandStr: string, output?: RelationReceiver): void;
    runSyncOld(commandStr: string): any;
    runSync(commandStr: string): Relation[];
    runCommandChainSync(commandStr: string): Relation[];
    runDerived(callback: (cxt: UpdateContext) => void): void;
    loadDumpFile(filename: string): void;
    loadDump(contents: string): void;
    saveDumpFile(filename: string): void;
    static loadFromDumpFile(filename: string): Graph;
    saveNewRelation(relation: Relation, output: RelationReceiver): void;
    getStorageHook(pattern: Pattern): StorageSlotHook;
    close(): void;
}
