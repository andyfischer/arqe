#! /usr/bin/env node

const { runStandardProcess, runAsync } = require('..')

runStandardProcess(async (graph) => {

    const rels = await runAsync(graph, 'get touchpoint input');

    for (const rel of rels) {
        const input = rel.getTag('input');

        const name = (await runAsync(graph, `get ${input} name`))[0].getTagValue('name');
        const type = (await runAsync(graph, `get ${input} type`))[0].getTagValue('type');

        console.log('set ' + rel.removeType('input').addTagStr('input').addTagStr(`var/${name}`).addTagStr(`type/${type}`).stringify());
    }
});
